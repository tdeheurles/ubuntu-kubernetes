#!/bin/bash
#set -euo pipefail

TARGETED_USER="vagrant"

# ETCD
ETCD_VERSION="2.2.5"
ETCD="etcd-v${ETCD_VERSION}-linux-amd64"
ETCD_FOLDER="/opt/${ETCD}"

# FLANNEL
INTERFACE="enp3s0"
FLANNEL_VERSION="0.5.5"
FLANNEL="flannel-${FLANNEL_VERSION}-linux-amd64"
FLANNEL_URL="https://github.com/coreos/flannel/releases/download/v${FLANNEL_VERSION}/${FLANNEL}.tar.gz"
FLANNEL_FOLDER="/opt/flannel-${FLANNEL_VERSION}"

# KUBERNETES
VERSION="1.1.7"
KUBERNETES_FOLDER="/opt/kubernetes"

MASTER_IP="127.0.0.1"
PUBLIC_IP="192.168.0.16"

ETCD_CLIENT="127.0.0.1:2379"

DNS_SERVICE_IP="10.3.0.10"
SERVICE_IP_RANGE="10.3.0.0/24"
K8S_SERVICE_IP="10.3.0.1"

CADVISOR_PORT="0"


KUBERNETES_MANIFEST_FOLDER="/etc/kubernetes/manifests"
SSL_PATH="/etc/ssl/kubernetes/certificates"
TEMP_SSL_PATH="certificates"

CA_PEM_NAME="ca.pem"
CA_KEY_PEM_NAME="ca-key.pem"
OPENSSL_CNF_NAME="openssl.cnf"
APISERVER_KEY_PEM_NAME="apiserver-key.pem"
APISERVER_CSR_NAME="apiserver.csr"
APISERVER_PEM_NAME="apiserver.pem"
WORKER_KEY_PEM_NAME="worker-key.pem"
WORKER_CSR_NAME="worker.csr"
WORKER_PEM_NAME="worker.pem"
ADMIN_KEY_PEM_NAME="admin-key.pem"
ADMIN_CSR_NAME="admin.csr"
ADMIN_PEM_NAME="admin.pem"

CA_PEM="${SSL_PATH}/${CA_PEM_NAME}"
CA_KEY_PEM="${SSL_PATH}/${CA_KEY_PEM_NAME}"
OPENSSL_CNF="${SSL_PATH}/${OPENSSL_CNF_NAME}"

APISERVER_KEY_PEM="${SSL_PATH}/${APISERVER_KEY_PEM_NAME}"
APISERVER_CSR="${SSL_PATH}/${APISERVER_CSR_NAME}"
APISERVER_PEM="${SSL_PATH}/${APISERVER_PEM_NAME}"

WORKER_KEY_PEM="${SSL_PATH}/${WORKER_KEY_PEM_NAME}"
WORKER_CSR="${SSL_PATH}/${WORKER_CSR_NAME}"
WORKER_PEM="${SSL_PATH}/${WORKER_PEM_NAME}"

ADMIN_KEY_PEM="${SSL_PATH}/${ADMIN_KEY_PEM_NAME}"
ADMIN_CSR="${SSL_PATH}/${ADMIN_CSR_NAME}"
ADMIN_PEM="${SSL_PATH}/${ADMIN_PEM_NAME}"
